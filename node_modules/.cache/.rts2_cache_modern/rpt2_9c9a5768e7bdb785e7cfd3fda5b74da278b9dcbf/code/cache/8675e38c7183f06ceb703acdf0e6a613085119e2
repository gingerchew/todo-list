{"code":"customElements.define('todo-list', class extends HTMLElement {\r\n    _todos = new WeakMap();\r\n    _input = this.querySelector('[ref=\"input\"]');\r\n    _submit = this.querySelector('[ref=\"submit\"]');\r\n    _list = this.querySelector('[ref=\"list\"]');\r\n    _useLocal = this.hasAttribute('use-local');\r\n    constructor() {\r\n        super();\r\n    }\r\n    get _lastItem() {\r\n        return this._list.children[this._list.children.length - 1];\r\n    }\r\n    set _todosLocal(todo) {\r\n        if (typeof todo === 'string') {\r\n            const data = JSON.parse(localStorage.getItem('todos') || '[]');\r\n            data.push(todo);\r\n            localStorage.setItem('todos', JSON.stringify(data));\r\n        }\r\n        else if (Array.isArray(todo)) {\r\n            localStorage.setItem('todos', JSON.stringify(todo));\r\n        }\r\n    }\r\n    get _todosLocal() {\r\n        return JSON.parse(localStorage.getItem('todos') || '[]');\r\n    }\r\n    add(todo, shouldStore = this._useLocal) {\r\n        const li = document.createElement('li', { is: 'todo-item' });\r\n        li.setAttribute('title', todo);\r\n        this._list.insertAdjacentElement('beforeend', li);\r\n        this._todos.set(this._lastItem, todo);\r\n        this._input.value = '';\r\n        if (shouldStore) {\r\n            this._todosLocal = todo;\r\n        }\r\n    }\r\n    delete(todoElement) {\r\n        if (this._todos.has(todoElement)) {\r\n            this._todos.delete(todoElement);\r\n            todoElement.remove();\r\n            if (this._useLocal) {\r\n                const data = this._todosLocal;\r\n                const indexOfTodo = data.indexOf(todoElement.getAttribute('title'));\r\n                data.splice(indexOfTodo, 1);\r\n                this._todosLocal = data;\r\n            }\r\n        }\r\n    }\r\n    handleEvent({ type, target }) {\r\n        if (type === 'click' &&\r\n            target.closest('[ref=\"submit\"]') &&\r\n            this._input.value !== '') {\r\n            this.add(this._input.value);\r\n        }\r\n    }\r\n    connectedCallback() {\r\n        this._useLocal &&\r\n            this._todosLocal\r\n                .forEach(todo => this.add(todo, false));\r\n        this._submit.addEventListener('click', this);\r\n    }\r\n    disconnectedCallback() {\r\n        this._submit.removeEventListener('click', this);\r\n    }\r\n});\r\ncustomElements.define('todo-item', class extends HTMLLIElement {\r\n    _listParent = this.closest('todo-list');\r\n    constructor() {\r\n        super();\r\n        if (!this.hasAttribute('title')) {\r\n            throw new Error('TodoItem must have a title attribute to be constructed');\r\n        }\r\n    }\r\n    _removeSelf() {\r\n        this._listParent.delete(this);\r\n    }\r\n    handleEvent({ type, target }) {\r\n        if (type !== 'click')\r\n            return;\r\n        if (!target.closest('[type=\"button\"]'))\r\n            return;\r\n        this._removeSelf();\r\n    }\r\n    connectedCallback() {\r\n        this.innerHTML = `<span>${this.getAttribute('title')}</span><button type=\"button\">&times; Clear</button>`;\r\n        this.addEventListener('click', this);\r\n    }\r\n    disconnectedCallback() {\r\n        this.removeEventListener('click', this);\r\n    }\r\n}, { extends: 'li' });\r\n//# sourceMappingURL=index.js.map","references":[],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/ginger/Code/todo-list-wc/dist/index.d.ts","writeByteOrderMark":false,"text":"interface ITodoList extends HTMLElement {\r\n    _input: HTMLInputElement;\r\n    _submit: HTMLButtonElement;\r\n    _list: ITodoListElement;\r\n    _todos: WeakMap<ITodoItem, string>;\r\n    _useLocal: boolean;\r\n    get _lastItem(): ITodoItem;\r\n    set _todosLocal(todo: string | string[]);\r\n    get _todosLocal(): string[];\r\n    add(todo: string, shouldStore: boolean): void;\r\n    delete(todo: ITodoItem): void;\r\n    handleEvent(e: MouseEvent): void;\r\n    connectedCallback(): void;\r\n    disconnectedCallback(): void;\r\n}\r\ninterface ITodoListElement extends HTMLUListElement {\r\n    children: HTMLCollectionOf<ITodoItem>;\r\n}\r\ninterface ITodoItem extends HTMLLIElement {\r\n    _listParent: ITodoList;\r\n    _removeSelf(): void;\r\n    handleEvent(e: MouseEvent): void;\r\n    connectedCallback(): void;\r\n    disconnectedCallback(): void;\r\n}\r\n"}}
