{"code":"export function define() {\r\n    window.customElements.define('todo-list', TodoList);\r\n    window.customElements.define('todo-item', TodoItem, { extends: 'button' });\r\n}\r\nclass TodoList extends HTMLElement {\r\n    input;\r\n    submit;\r\n    list;\r\n    _todos;\r\n    constructor() {\r\n        super();\r\n        this._todos = new WeakMap();\r\n    }\r\n    get _useLocal() {\r\n        return this.hasAttribute('use-local');\r\n    }\r\n    get _lastItem() {\r\n        return this.list.children[this.list.children.length - 1];\r\n    }\r\n    set _todosLocal(todo) {\r\n        if (typeof todo === 'string') {\r\n            const data = JSON.parse(localStorage.getItem('todos') || '[]');\r\n            data.push(todo);\r\n            localStorage.setItem('todos', JSON.stringify(data));\r\n        }\r\n        else if (Array.isArray(todo)) {\r\n            localStorage.setItem('todos', JSON.stringify(todo));\r\n        }\r\n    }\r\n    get _todosLocal() {\r\n        return JSON.parse(localStorage.getItem('todos') || '[]');\r\n    }\r\n    add(todo, shouldStore = this._useLocal) {\r\n        this.list.insertAdjacentHTML('beforeend', `<li is=\"todo-item\" title=\"${todo}\"></li>`);\r\n        this._todos.set(this._lastItem, todo);\r\n        this.input.value = '';\r\n        if (shouldStore) {\r\n            this._todosLocal = todo;\r\n        }\r\n    }\r\n    delete(todoElement) {\r\n        if (this._todos.has(todoElement)) {\r\n            this._todos.delete(todoElement);\r\n            todoElement.remove();\r\n            if (this._useLocal) {\r\n                const data = this._todosLocal;\r\n                const indexOfTodo = data.indexOf(todoElement.getAttribute('title'));\r\n                data.splice(indexOfTodo, 1);\r\n                this._todosLocal = data;\r\n            }\r\n        }\r\n    }\r\n    handleEvent({ type, target }) {\r\n        if (type === 'click' &&\r\n            target.closest('[ref=\"submit\"]') &&\r\n            this.input.value !== '') {\r\n            this.add(this.input.value);\r\n        }\r\n    }\r\n    connectedCallback() {\r\n        this._useLocal &&\r\n            this._todosLocal\r\n                .forEach(todo => this.add(todo, false));\r\n        this.submit.addEventListener('click', this);\r\n    }\r\n    disconnectedCallback() {\r\n        this.submit.removeEventListener('click', this);\r\n    }\r\n}\r\nclass TodoItem extends HTMLLIElement {\r\n    title;\r\n    listParent;\r\n    constructor() {\r\n        super();\r\n        if (!this.hasAttribute('title')) {\r\n            throw new Error('TodoItem must have a title attribute to be constructed');\r\n        }\r\n        this.title = this.getAttribute('title');\r\n        this.listParent = this.closest('todo-list');\r\n    }\r\n    _removeSelf() {\r\n        this.listParent.delete(this);\r\n    }\r\n    handleEvent({ type, target }) {\r\n        if (type !== 'click')\r\n            return;\r\n        if (!target.closest('[type=\"button\"]'))\r\n            return;\r\n        this._removeSelf();\r\n    }\r\n    connectedCallback() {\r\n        this.innerHTML = `<span>${this.title}</span><button type=\"button\">&times; Clear</button>`;\r\n        this.addEventListener('click', this);\r\n    }\r\n    disconnectedCallback() {\r\n        this.removeEventListener('click', this);\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","references":[],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/ginger/Code/todo-list-wc/dist/index.d.ts","writeByteOrderMark":false,"text":"export declare function define(): void;\r\n"}}
