window.customElements.define("todo-list",class extends HTMLElement{constructor(){super(),this.t=new WeakMap,this.i=this.querySelector('[ref="input"]'),this.o=this.querySelector('[ref="submit"]'),this.l=this.querySelector('[ref="list"]'),this.h=this.hasAttribute("use-local")}get u(){return this.l.children[this.l.children.length-1]}set m(t){if("string"==typeof t){const e=JSON.parse(localStorage.getItem("todos")||"[]");e.push(t),localStorage.setItem("todos",JSON.stringify(e))}else Array.isArray(t)&&localStorage.setItem("todos",JSON.stringify(t))}get m(){return JSON.parse(localStorage.getItem("todos")||"[]")}add(t,e=this.h){this.l.insertAdjacentHTML("beforeend",`<todo-item title="${t}"></todo-item>`),this.t.set(this.u,t),this.i.value="",e&&(this.m=t)}delete(t){if(this.t.has(t)){if(this.t.delete(t),this.h){const e=this.m,s=e.indexOf(t.getAttribute("title"));e.splice(s,1),this.m=e}t.remove()}}handleEvent({type:t,target:e}){"click"===t&&e.closest('[ref="submit"]')&&""!==this.i.value&&this.add(this.i.value)}connectedCallback(){this.h&&this.m.forEach(t=>this.add(t,!1)),this.o.addEventListener("click",this)}disconnectedCallback(){this.o.removeEventListener("click",this)}}),window.customElements.define("todo-item",class extends HTMLElement{constructor(){super(),this.k=this.closest("todo-list"),this.hasAttribute("title")||console.error("<todo-item> must have a title attribute to be constructed"),this.setAttribute("role","listitem")}static observedAttributes(){return["title"]}render(t){this.innerHTML=`<span>${t}</span><button type="button">&times; Clear</button>`}attributeChangedCallback(t,e,s){"title"===t&&this.render(s)}p(){this.k.delete(this)}handleEvent({type:t,target:e}){"click"===t&&e.closest('[type="button"]')&&this.p()}connectedCallback(){console.log("connected"),this.render(this.getAttribute("title")),this.addEventListener("click",this)}disconnectedCallback(){this.removeEventListener("click",this)}});
//# sourceMappingURL=todo-list.modern.js.map
